!function(e){"use strict";e.fn.bootstrapDualListbox=function(t){return this.each(function(){function l(){R&&(w.moveonselect=!0,w.preserveselectiononmove=!1),w.moveonselect&&y.addClass("moveonselect");var e=_.originalselect.attr("name")||"";if(w.nonselectedlistlabel){var t="bootstrap-duallistbox-nonselected-list_"+e;_.box1.prepend('<label for="'+t+'">'+w.nonselectedlistlabel+"</label>"),_.select1.prop("id",t)}if(w.selectedlistlabel){var l="bootstrap-duallistbox-selected-list_"+e;_.box2.prepend('<label for="'+l+'">'+w.selectedlistlabel+"</label>"),_.select2.prop("id",l)}w.helperselectnamepostfix&&(_.select1.attr("name",e+w.helperselectnamepostfix+"1"),_.select2.attr("name",e+w.helperselectnamepostfix+"2"));var o=_.originalselect.attr("class");"undefined"!=typeof o&&o&&(o=o.match(/\bspan[1-9][0-2]?/),o||(o=_.originalselect.attr("class"),o=o.match(/\bcol-md-[1-9][0-2]?/))),o&&y.addClass(o.toString());var a=_.originalselect.height()<w.selectorminimalheight?w.selectorminimalheight:_.originalselect.height();_.select1.height(a),_.select2.height(a),_.originalselect.addClass("hide"),i(),w.showfilterinputs?(_.filterinput1.val(w.initialfilterfrom),_.filterinput2.val(w.initialfilterto)):(_.filterinput1.hide(),_.filterinput2.hide()),s(),n()}function i(){_.originalselect.find("option").each(function(t,l){var i=e(l);"undefined"==typeof i.data("original-index")&&i.data("original-index",k++),"undefined"==typeof i.data("_selected")&&i.data("_selected",!1)})}function n(){C=0,_.select1.empty(),_.select2.empty(),_.originalselect.find("option").each(function(t,l){var i=e(l);i.prop("selected")?(C++,_.select2.append(i.clone(!0).prop("selected",i.data("_selected")))):_.select1.append(i.clone(!0).prop("selected",i.data("_selected")))}),p(),d(),a()}function o(e,t){return e.replace(/\{(\d+)\}/g,function(e,l){return"undefined"!=typeof t[l]?t[l]:e})}function a(){if(w.infotext){var e=_.select1.find("option").length,t=_.select2.find("option").length,l=_.originalselect.find("option").length-C,i=C,n="";n=0===l?w.infotextempty:e===l?o(w.infotext,[e,l]):o(w.infotextfiltered,[e,l]),_.info1.html(n),_.box1.toggleClass("filtered",!(e===l||0===l)),n=0===i?w.infotextempty:t===i?o(w.infotext,[t,i]):o(w.infotextfiltered,[t,i]),_.info2.html(n),_.box2.toggleClass("filtered",!(t===i||0===i))}}function s(){_.form.submit(function(e){_.filterinput1.is(":focus")?(e.preventDefault(),_.filterinput1.focusout()):_.filterinput2.is(":focus")&&(e.preventDefault(),_.filterinput2.focusout())}),_.originalselect.on("bootstrapduallistbox.refresh",function(e,t){i(),t?f():(r(),c()),n()}),_.filter1clear.on("click",function(){_.filterinput1.val(""),n()}),_.filter2clear.on("click",function(){_.filterinput2.val(""),n()}),_.movebutton.on("click",function(){v()}),_.moveallbutton.on("click",function(){g()}),_.removebutton.on("click",function(){m()}),_.removeallbutton.on("click",function(){x()}),_.filterinput1.on("change keyup",function(){p()}),_.filterinput2.on("change keyup",function(){d()}),w.moveonselect&&(w.preserveselectiononmove=!1,_.select1.on("change",function(){v()}),_.select2.on("change",function(){m()}))}function r(){_.select1.find("option").each(function(t,l){var i=e(l);_.originalselect.find("option").eq(i.data("original-index")).data("_selected",i.prop("selected"))})}function c(){_.select2.find("option").each(function(t,l){var i=e(l);_.originalselect.find("option").eq(i.data("original-index")).data("_selected",i.prop("selected"))})}function f(){_.select1.find("option").each(function(){_.originalselect.find("option").data("_selected",!1)})}function p(){r(),_.select1.empty().scrollTop(0);var t=new RegExp(e.trim(_.filterinput1.val()),"gi");_.originalselect.find("option").not(":selected").each(function(l,i){var n=e(i),o=!0;i.text.match(t)&&(o=!1,_.select1.append(n.clone(!0).prop("selected",n.data("_selected")))),_.originalselect.find("option").eq(n.data("original-index")).data("filtered1",o)}),a()}function d(){c(),_.select2.empty().scrollTop(0);var t=new RegExp(e.trim(_.filterinput2.val()),"gi");_.originalselect.find("option:selected").each(function(l,i){var n=e(i),o=!0;i.text.match(t)&&(o=!1,_.select2.append(n.clone(!0).prop("selected",n.data("_selected")))),_.originalselect.find("option").eq(n.data("original-index")).data("filtered2",o)}),a()}function u(t){t.find("option").sort(function(t,l){return e(t).data("original-index")>e(l).data("original-index")?1:-1}).appendTo(t)}function b(t,l){_.originalselect.find("option").each(function(i,n){var o=e(n);o.data("original-index")===t&&o.prop("selected",l)})}function v(){"all"===w.preserveselectiononmove?(r(),c()):"moved"===w.preserveselectiononmove&&r(),_.select1.find("option:selected").each(function(t,l){var i=e(l);i.data("filtered1")||b(i.data("original-index"),!0)}),n(),u(_.select2)}function m(){"all"===w.preserveselectiononmove?(r(),c()):"moved"===w.preserveselectiononmove&&c(),_.select2.find("option:selected").each(function(t,l){var i=e(l);i.data("filtered2")||b(i.data("original-index"),!1)}),n(),u(_.select1)}function g(){"all"===w.preserveselectiononmove?(r(),c()):"moved"===w.preserveselectiononmove&&r(),_.originalselect.find("option").each(function(t,l){var i=e(l);i.data("filtered1")||i.prop("selected",!0)}),n()}function x(){"all"===w.preserveselectiononmove?(r(),c()):"moved"===w.preserveselectiononmove&&c(),_.originalselect.find("option").each(function(t,l){var i=e(l);i.data("filtered2")||i.prop("selected",!1)}),n()}var h=e(this);if(!h.is("select"))return h.find("select").each(function(l,i){e(i).bootstrapDualListbox(t)});if(h.data("duallistbox_generated"))return this;var y,w=e.extend({bootstrap2compatible:!1,preserveselectiononmove:!1,moveonselect:!0,initialfilterfrom:"",initialfilterto:"",helperselectnamepostfix:"_helper",infotext:"Showing all {0}",infotextfiltered:'<span class="label label-warning">Filtered</span> {0} from {1}',infotextempty:"Empty list",selectorminimalheight:100,showfilterinputs:!0,filterplaceholder:"Filter",filtertextclear:"show all",nonselectedlistlabel:!1,selectedlistlabel:!1},t);y=w.bootstrap2compatible?e('<div class="row-fluid bootstrap-duallistbox-container bs2compatible"><div class="span6 box1"><span class="info-container"><span class="info"></span><button type="button" class="btn btn-mini clear1 pull-right">'+w.filtertextclear+'</button></span><input placeholder="'+w.filterplaceholder+'" class="filter" type="text"><div class="btn-group buttons"><button type="button" class="btn moveall" title="Move all"><i class="fa fa-arrow-right"></i><i class="fa fa-arrow-right"></i></button><button type="button" class="btn move" title="Move selected"><i class="fa fa-arrow-right"></i></button></div><select multiple="multiple" data-duallistbox_generated="true"></select></div><div class="span6 box2"><span class="info-container"><span class="info"></span><button type="button" class="btn btn-mini clear2 pull-right">'+w.filtertextclear+'</button></span><input placeholder="'+w.filterplaceholder+'" class="filter" type="text"><div class="btn-group buttons"><button type="button" class="btn remove" title="Remove selected"><i class="fa fa-arrow-left"></i></button><button type="button" class="btn removeall" title="Remove all"><i class="fa fa-arrow-left"></i><i class="fa fa-arrow-left"></i></button></div><select multiple="multiple" data-duallistbox_generated="true"></select></div></div>').insertBefore(h):e('<div class="row bootstrap-duallistbox-container"><div class="col-md-6 box1"><span class="info-container"><span class="info"></span><button type="button" class="btn btn-primary btn-xs clear1 pull-right">'+w.filtertextclear+'</button></span><input placeholder="'+w.filterplaceholder+'" class="filter" type="text"><div class="btn-group buttons"><button type="button" class="btn btn-primary moveall" title="Move all"><i class="fa fa-arrow-right"></i><i class="fa fa-arrow-right"></i></button><button type="button" class="btn btn-primary move" title="Move selected"><i class="fa fa-arrow-right"></i></button></div><select multiple="multiple" data-duallistbox_generated="true"></select></div><div class="col-md-6 box2"><span class="info-container"><span class="info"></span><button type="button" class="btn btn-primary btn-xs clear2 pull-right">'+w.filtertextclear+'</button></span><input placeholder="'+w.filterplaceholder+'" class="filter" type="text"><div class="btn-group buttons"><button type="button" class="btn btn-primary remove" title="Remove selected"><i class="fa fa-arrow-left"></i></button><button type="button" class="btn btn-primary  removeall" title="Remove all"><i class="fa fa-arrow-left"></i><i class="fa fa-arrow-left"></i></button></div><select multiple="multiple" data-duallistbox_generated="true"></select></div></div>').insertBefore(h);var _={originalselect:h,box1:e(".box1",y),box2:e(".box2",y),filterinput1:e(".box1 .filter",y),filterinput2:e(".box2 .filter",y),filter1clear:e(".box1 .clear1",y),filter2clear:e(".box2 .clear2",y),info1:e(".box1 .info",y),info2:e(".box2 .info",y),select1:e(".box1 select",y),select2:e(".box2 select",y),movebutton:e(".box1 .move",y),removebutton:e(".box2 .remove",y),moveallbutton:e(".box1 .moveall",y),removeallbutton:e(".box2 .removeall",y),form:e(e(".box1 .filter",y)[0].form)},k=0,C=0,R=/android/i.test(navigator.userAgent.toLowerCase());l()})}}(jQuery);